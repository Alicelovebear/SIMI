(window.webpackJsonp=window.webpackJsonp||[]).push([[5,0],{129:function(t,e,a){"use strict";a.r(e);var i=a(144),r=a.n(i),n=a(140),l=(a(70),a(69)),o=a(141),s=(a(40),{data:function(){return{notAccess:!1,selectUrl:window.base_url+"admin/staff/items/",updateUrl:window.base_url+"admin/staff/update/",search:{LoginName:{value:"",operator:"="},role_id:{value:"",operator:"="}},pagination:{total_items:0,per_page:10,from:1,to:0,items:[],current_page:1},staffs:[],menuRight:{setRight:!1},dialogFormVisible:!1,form:{label:"",fullName:"",role:""},row:[],allRole:[],allRight:{},checkval:{},token:{},myRole:{},isSelect:!1}},mounted:function(){var t=this;this.fetchItems(this.pagination.current_page,function(){t.getAllRoleRight()})},activated:function(){},methods:{handleTypeChange:function(){this.form.role&&this.getRoleRight(this.form.role)},getAllRoleRight:function(){var a=this;n.a(window.base_url+"admin/role/getAllRightsCfg/",{},function(t){if(0===t.body.retcode){a.allRole=t.body.roles,a.allRight=t.body.data,a.checkval=t.body.checkRights;var e=a.allRole[0].id;a.getRoleRight(e)}})},getRoleRight:function(t,e){var l=this;n.a(window.base_url+"admin/role/getRoleRights/",{id:t,u_id:e},function(t){if(0===t.body.retcode){for(var e in l.checkval)l.checkval[e]=!1;for(var a in 1==t.body.type?l.isSelect=!0:l.isSelect=!1,l.myRole={},t.body.data)l.checkval[a]=!0,l.myRole[a]=!0;for(var i in t.body.rights)l.checkval[i]=!0}})},dialogClosed:function(){this.$refs.form.resetFields()},handleRight:function(t,e){this.dialogFormVisible=!0,this.row=e,this.form.role="",this.form.fullName=e.FullName;var a=e.role_id,i=!0,l=!1,n=void 0;try{for(var o,s=r()(this.allRole);!(i=(o=s.next()).done);i=!0)if(a==o.value.id){this.form.role=a;break}}catch(t){l=!0,n=t}finally{try{!i&&s.return&&s.return()}finally{if(l)throw n}}this.form.role?this.getRoleRight(this.form.role,e.id):(this.isSelect=!1,this.checkval=[])},handleSubmitRight:function(){var e=this,t={id:this.row.id,role_id:this.form.role,permissions:{},type:0};if(this.isSelect)for(var a in t.type=1,this.checkval)this.checkval[a]&&!this.myRole[a]&&(t.permissions[a]=!0);n.b(this.updateUrl,t,function(t){0===t.body.retcode?(e.dialogFormVisible=!1,e.fetchItems(e.pagination.current_page)):4004==t.body.retcode&&e.$message.error("无权限操作")})},tableRowClassName:function(t,e){return e%2==0?"info-row":e%3==0?"positive-row":""},handleSizeChange:function(t){this.pagination.per_page=t,this.fetchItems(this.pagination.current_page)},handleCurrentChange:function(t){this.pagination.current_page=t,this.fetchItems(this.pagination.current_page)},reloadPage:function(){window.location.reload()},onSearchHanddle:function(){this.fetchItems(1)},fetchItems:function(t,i){var l=this;if(!this.selectUrl)return!1;var e={};for(var a in e.page=t,e.limit=this.pagination.per_page,e.search={},this.search){var n=this.search[a];n.value&&(e.search[a]=n)}return this.$store.dispatch("fetchUserList",e).then(function(){var t=l.$store.getters.userListData;if(4004!=t.retcode){for(var e in t.data)l.pagination[e]=t.data[e];for(var a in t.menuRight)l.menuRight[a]=t.menuRight[a];l.menuRight.setRight=!0,"function"==typeof i&&i()}else l.notAccess=!0}),!1}},components:{ErrorTip:l.default,elAutocomplete:o.a}}),c=a(44),u=Object(c.a)(s,function(){var l=this,t=l.$createElement,n=l._self._c||t;return l.notAccess?n("ErrorTip",{attrs:{msg:"您无权限访问哟~"}}):n("el-row",[n("el-row",{staticClass:"pb15",attrs:{gutter:24}},[n("el-col",{staticClass:"ptb5",attrs:{span:6}},[n("div",{staticClass:"el-input el-input-group el-input-group--prepend"},[n("div",{staticClass:"el-input-group__prepend"},[l._v("管理员")]),l._v(" "),n("elAutocomplete",{model:{value:l.search.LoginName.value,callback:function(t){l.$set(l.search.LoginName,"value",t)},expression:"search.LoginName.value"}})],1)]),l._v(" "),l._e(),l._v(" "),n("el-col",{staticClass:"ptb5",attrs:{span:3}},[n("el-button",{attrs:{type:"primary"},on:{click:l.onSearchHanddle}},[l._v("查询")])],1)],1),l._v(" "),n("el-row",{staticClass:"pb15"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:l.pagination.items,border:"","row-class-name":l.tableRowClassName}},[n("el-table-column",{attrs:{property:"FullName",label:"管理员",width:"180"}}),l._v(" "),n("el-table-column",{attrs:{property:"role_id_zh",label:"角色",width:"180"}}),l._v(" "),n("el-table-column",{attrs:{property:"DepartmentName",label:"所属部门"}}),l._v(" "),n("el-table-column",{attrs:{property:"GroupName",label:"所属业务组"}}),l._v(" "),l.menuRight.setRight?n("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:l._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"small"},on:{click:function(t){l.handleRight(e.$index,e.row)}}},[l._v("设置权限")])]}}])}):l._e()],1)],1),l._v(" "),n("el-row",{attrs:{gutter:24}},[n("el-col",{staticStyle:{"text-align":"right"},attrs:{span:24}},[n("div",{staticClass:"grid-content bg-purple"},[n("div",{staticClass:"block"},[n("el-pagination",{attrs:{"current-page":l.pagination.current_page,"page-sizes":[10,15,20,40],"page-size":l.pagination.per_page,layout:"total, sizes, prev, pager, next, jumper",total:l.pagination.total},on:{"size-change":l.handleSizeChange,"current-change":l.handleCurrentChange}})],1)])])],1),l._v(" "),n("el-dialog",{attrs:{title:"设置权限",visible:l.dialogFormVisible,size:"small"},on:{"update:visible":function(t){l.dialogFormVisible=t},close:l.dialogClosed}},[n("el-form",{ref:"form",attrs:{model:l.form,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"受权用户：",prop:"fullName"}},[n("span",[l._v(l._s(l.form.fullName))])]),l._v(" "),n("el-form-item",{attrs:{label:"角色选择："}},[n("el-select",{attrs:{clearable:"",placeholder:"请选择",size:"small"},on:{change:function(t){l.handleTypeChange(t)}},model:{value:l.form.role,callback:function(t){l.$set(l.form,"role",t)},expression:"form.role"}},l._l(l.allRole,function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),l._v(" "),n("span",[l._v("自由选择权限："),n("el-switch",{model:{value:l.isSelect,callback:function(t){l.isSelect=t},expression:"isSelect"}})],1)],1),l._v(" "),l._l(l.allRight,function(t,i){return n("el-form-item",{key:i,staticStyle:{"margin-bottom":"5px"},attrs:{label:t.name+"："}},l._l(t.children,function(t,a){return n("el-col",{key:a,staticStyle:{"border-bottom":"1px #F9FAFC solid"}},l._l(t,function(t,e){return n("el-col",{key:e,attrs:{span:6}},[l.myRole[i+"/"+a+"/"+e]?n("el-checkbox",{attrs:{disabled:""},model:{value:l.checkval[i+"/"+a+"/"+e],callback:function(t){l.$set(l.checkval,i+"/"+a+"/"+e,t)},expression:"checkval[index+'/'+index1+'/'+index2]"}},[l._v(l._s(t.name))]):n("el-checkbox",{attrs:{disabled:!l.isSelect},model:{value:l.checkval[i+"/"+a+"/"+e],callback:function(t){l.$set(l.checkval,i+"/"+a+"/"+e,t)},expression:"checkval[index+'/'+index1+'/'+index2]"}},[l._v(l._s(t.name))])],1)}),1)}),1)})],2),l._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{nativeOn:{click:function(t){l.dialogFormVisible=!1}}},[l._v("取 消")]),l._v(" "),n("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){l.handleSubmitRight()}}},[l._v("确 定")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="StaffList.vue",e.default=u.exports},138:function(t,e,a){},139:function(t,e,a){"use strict";var i=a(138);a.n(i).a},140:function(t,e,a){"use strict";a.d(e,"a",function(){return o}),a.d(e,"b",function(){return s});var l=a(0),i=a(19),n=a.n(i);function o(t,e,a){return r("get",t,e={params:e,timeout:12e3},a)}function s(t,e,a){return window._token&&!e[window._token.name]&&(e[window._token.name]=window._token.value),r("post",t,e,a)}function r(t,e,a,i){return l.default.http[t](e,a,{timeout:12e3}).then(function(t){if(t.body.token&&(window._token=t.body.token),"function"==typeof i){if(1004==t.body.retcode)return void alert(t.body.msg||"有错误信息！");i(t)}},function(t){t.body={retcode:-200,data:"",msg:"查询超时或接口异常"},"function"==typeof i&&i(t)})}l.default.use(n.a),l.default.http.options.emulateJSON=!0},141:function(t,e,a){"use strict";var i={props:["value","multi","size"],data:function(){return{defaultValue:"",staffs:[],oldVal:"",timer:null}},watch:{defaultValue:function(t,e){this.$emit("input",t)},value:function(t,e){this.defaultValue=t}},mounted:function(){var t=this;this.defaultValue=this.value,this.timer=setTimeout(function(){t.fetchStaff(),clearTimeout(t.timer),t.timer=null},500)},methods:{querySearch:function(t,e){var a=(t=t.replace(/(^\s*)|(\s*$)/g,"")).lastIndexOf(";")+1;this.oldVal=t.substr(0,a),(t=t.substr(a))||(t=" ");var i=this.staffs;e(t?i.filter(this.createStateFilter(t)):i)},createStateFilter:function(e){return function(t){return/.*[\u4e00-\u9fa5]+.*$/.test(e)?-1!==t.name.indexOf(e):0===t.value.indexOf(e.toLowerCase())}},handleSelect:function(t){if(t.value&&(this.defaultValue=this.oldVal+t.value,this.multi)){for(var e=this.defaultValue.split(";"),a=[],i=0;i<e.length;i++)-1==a.indexOf(e[i])&&a.push(e[i]);this.defaultValue=a.join(";")+";"}this.$emit("input",this.defaultValue)},fetchStaff:function(){var e=this;window._staffs&&0<window._staffs.length?this.staffs=window._staffs:this.$http.get(window.base_url+"admin/common/getStaffs/",{}).then(function(t){e.staffs=window._staffs=t.body},function(t){})}}},l=a(44),n=Object(l.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,size:e.size,placeholder:"请输入RTX名称"},on:{select:e.handleSelect},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"name"},[e._v(e._s(t.item.name))])]}}]),model:{value:e.defaultValue,callback:function(t){e.defaultValue=t},expression:"defaultValue"}})},[],!1,null,null,null);n.options.__file="elAutocomplete.vue",e.a=n.exports},144:function(t,e,a){t.exports={default:a(145),__esModule:!0}},145:function(t,e,a){a(46),a(45),t.exports=a(146)},146:function(t,e,a){var i=a(7),l=a(71);t.exports=a(2).getIterator=function(t){var e=l(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}},69:function(t,e,a){"use strict";a.r(e);var i=(a(139),a(44)),l=Object(i.a)({data:function(){return{imgSrc:"data:image/png;base64,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",tips:"您访问的页面不存在"}},props:["msg"],mounted:function(){this.tips=this.msg||"您访问的页面不存在"},watch:{msg:function(t){this.tips=t||"您访问的页面不存在"}}},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"ui_mask_transparent"}),t._v(" "),a("div",{staticClass:"ui_msg"},[a("div",{staticClass:"ui_icon_area"},[a("i",[a("img",{attrs:{src:t.imgSrc}})])]),t._v(" "),a("div",{staticClass:"ui_text_area"},[a("h2",{staticClass:"ui_msg_title"},[t._v(t._s(t.tips))])])])])],1)},[],!1,null,null,null);l.options.__file="ErrorTip.vue",e.default=l.exports}}]);