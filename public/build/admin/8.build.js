(window.webpackJsonp=window.webpackJsonp||[]).push([[8,0],{133:function(t,e,a){"use strict";a.r(e);var i=a(140),s=(a(70),a(69)),l=a(141),n={data:function(){return{notAccess:!1,queryUrl:window.base_url+"admin/log/items",detailUrl:"",updateUrl:"",search:{opertable:{value:"",operator:"="},operid:{value:"",operator:"="},username:{value:"",operator:"="},addtime:{value:{sdate:"",edate:""},operator:"range"}},addtime_range:["",""],pagination:{items:[],total:0,per_page:10,from:1,to:0,current_page:1},staffs:[],pickerOptions1:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]}}},created:function(){this.fetchItems(this.pagination.current_page)},mounted:function(){},methods:{handleSizeChange:function(t){this.pagination.per_page=t,this.fetchItems(this.pagination.current_page)},handleCurrentChange:function(t){this.pagination.current_page=t,this.fetchItems(this.pagination.current_page)},reloadPage:function(){window.location.reload()},onSearchHanddle:function(){this.addtime_range[0]&&(this.search.addtime.value.sdate=this.formatDate(this.addtime_range[0])),this.addtime_range[1]&&(this.search.addtime.value.edate=this.formatDate(this.addtime_range[1])),this.fetchItems(0)},formatDate:function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},fetchItems:function(t){var e=this;if(!this.queryUrl)return!1;var a={};for(var s in a.page=t,a.limit=this.pagination.per_page,a.search={},this.search){var l=this.search[s];l.value&&(a.search[s]=l)}i.a(this.queryUrl,a,function(t){if(0==t.body.retcode)e.items=t.body.data.data,e.pagination=t.body.data;else if(4004==t.body.retcode)return void(e.notAccess=!0)})}},components:{ErrorTip:s.default,elAutocomplete:l.a}},r=a(44),o=Object(r.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.notAccess?a("ErrorTip",{attrs:{msg:"您无权限访问哟~"}}):a("el-row",[a("el-row",{staticClass:"pb15",attrs:{gutter:24}},[a("el-col",{staticClass:"ptb5",attrs:{span:6}},[a("div",{staticClass:"el-input el-input-group el-input-group--prepend"},[a("div",{staticClass:"el-input-group__prepend"},[e._v("操作人")]),e._v(" "),a("elAutocomplete",{model:{value:e.search.username.value,callback:function(t){e.$set(e.search.username,"value",t)},expression:"search.username.value"}})],1)]),e._v(" "),a("el-col",{staticClass:"ptb5",attrs:{span:6}},[a("el-input",{attrs:{placeholder:""},model:{value:e.search.opertable.value,callback:function(t){e.$set(e.search.opertable,"value",t)},expression:"search.opertable.value"}},[a("template",{slot:"prepend"},[e._v("操作表")])],2)],1),e._v(" "),a("el-col",{staticClass:"ptb5",attrs:{span:6}},[a("el-input",{attrs:{placeholder:""},model:{value:e.search.operid.value,callback:function(t){e.$set(e.search.operid,"value",t)},expression:"search.operid.value"}},[a("template",{slot:"prepend"},[e._v("唯一标识")])],2)],1),e._v(" "),a("el-col",{staticClass:"ptb5",attrs:{span:6}},[a("div",{staticClass:"search-label"},[a("div",{staticClass:"search-label-prepend"},[e._v("访问日期")]),e._v(" "),a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange",align:"right",placeholder:"选择日期范围","picker-options":e.pickerOptions1},model:{value:e.addtime_range,callback:function(t){e.addtime_range=t},expression:"addtime_range"}})],1)]),e._v(" "),a("el-col",{staticClass:"ptb5",attrs:{span:6}},[a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.onSearchHanddle}},[e._v("搜索")])],1)],1),e._v(" "),a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.pagination.items,border:""}},[a("el-table-column",{attrs:{property:"id",label:"ID",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{property:"addtime",label:"操作时间",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{property:"username",label:"操作人",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{property:"operid",label:"唯一标识",width:"160",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{property:"oper",label:"操作类型",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{property:"opertable",label:"操作表名",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{property:"ip",label:"客户端IP",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{property:"url",label:"操作URL",width:""}}),e._v(" "),a("el-table-column",{attrs:{label:"详情",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"popover",rawName:"v-popover:handlePopover(scope)",arg:"handlePopover(scope)"}],staticClass:"test"},[a("el-button",{attrs:{type:"text",size:"small"}},[e._v("点击查看")]),e._v(" "),a("el-popover",{ref:"handlePopover(scope)",attrs:{placement:"left",trigger:"click"}},[a("div",{staticClass:"el-table el-table__body-wrapper",staticStyle:{overflow:"auto",height:"400px",padding:"10px","max-width":"800px"}},[a("table",{staticClass:"el-table__body",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[a("tbody",[a("tr",[a("th",{staticClass:"el-table_1_column_1 is-leaf",attrs:{width:"120"}},[e._v("操作人")]),a("td",{staticClass:"el-table_1_column_1",attrs:{width:"300"}},[e._v(e._s(t.row.username))]),e._v(" "),a("th",{staticClass:"el-table_1_column_1 is-leaf",attrs:{width:"120"}},[e._v("操作时间")]),a("td",{staticClass:"el-table_1_column_1",attrs:{width:"300"}},[e._v(e._s(t.row.addtime))])]),e._v(" "),a("tr",[a("th",{staticClass:"el-table_1_column_1 is-leaf",attrs:{width:"120"}},[e._v("操作类型")]),a("td",{staticClass:"el-table_1_column_1",attrs:{width:"300"}},[e._v(e._s(t.row.oper))]),e._v(" "),a("th",{staticClass:"el-table_1_column_1 is-leaf",attrs:{width:"120"}},[e._v("操作URL")]),a("td",{staticClass:"el-table_1_column_1",attrs:{width:"300"}},[e._v(e._s(t.row.url))])]),e._v(" "),a("tr",[a("th",{staticClass:"el-table_1_column_1 is-leaf",attrs:{width:"120"}},[e._v("操作表名")]),a("td",{staticClass:"el-table_1_column_1",attrs:{width:"300"}},[e._v(e._s(t.row.opertable))]),e._v(" "),a("th",{staticClass:"el-table_1_column_1 is-leaf",attrs:{width:"120"}},[e._v("唯一标识")]),a("td",{staticClass:"el-table_1_column_1",attrs:{width:"300"}},[e._v(e._s(t.row.operid))])]),e._v(" "),a("tr",[a("th",{staticClass:"el-table_1_column_1 is-leaf",attrs:{width:"120"}},[e._v("操作前信息")]),a("td",{staticClass:"el-table_1_column_1",attrs:{colspan:"3"}},[a("div",[a("pre",[e._v(e._s(t.row.oldinfo))])])])]),e._v(" "),a("tr",[a("th",{staticClass:"el-table_1_column_1 is-leaf",attrs:{width:"120"}},[e._v("操作后信息")]),a("td",{staticClass:"el-table_1_column_1",attrs:{colspan:"3"}},[a("div",[a("pre",[e._v(e._s(t.row.newinfo))])])])])])])])])],1)]}}])})],1)],1)])],1),e._v(" "),a("el-row",{staticStyle:{padding:"5px 0"},attrs:{gutter:24}},[a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.pagination.current_page,"page-sizes":[10,15,20,40],"page-size":e.pagination.per_page,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])])],1)],1)},[],!1,null,null,null);o.options.__file="LogList.vue",e.default=o.exports},138:function(t,e,a){},139:function(t,e,a){"use strict";var s=a(138);a.n(s).a},140:function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"b",function(){return r});var l=a(0),s=a(19),i=a.n(s);function n(t,e,a){return o("get",t,e={params:e,timeout:12e3},a)}function r(t,e,a){return window._token&&!e[window._token.name]&&(e[window._token.name]=window._token.value),o("post",t,e,a)}function o(t,e,a,s){return l.default.http[t](e,a,{timeout:12e3}).then(function(t){if(t.body.token&&(window._token=t.body.token),"function"==typeof s){if(1004==t.body.retcode)return void alert(t.body.msg||"有错误信息！");s(t)}},function(t){t.body={retcode:-200,data:"",msg:"查询超时或接口异常"},"function"==typeof s&&s(t)})}l.default.use(i.a),l.default.http.options.emulateJSON=!0},141:function(t,e,a){"use strict";var s={props:["value","multi","size"],data:function(){return{defaultValue:"",staffs:[],oldVal:"",timer:null}},watch:{defaultValue:function(t,e){this.$emit("input",t)},value:function(t,e){this.defaultValue=t}},mounted:function(){var t=this;this.defaultValue=this.value,this.timer=setTimeout(function(){t.fetchStaff(),clearTimeout(t.timer),t.timer=null},500)},methods:{querySearch:function(t,e){var a=(t=t.replace(/(^\s*)|(\s*$)/g,"")).lastIndexOf(";")+1;this.oldVal=t.substr(0,a),(t=t.substr(a))||(t=" ");var s=this.staffs;e(t?s.filter(this.createStateFilter(t)):s)},createStateFilter:function(e){return function(t){return/.*[\u4e00-\u9fa5]+.*$/.test(e)?-1!==t.name.indexOf(e):0===t.value.indexOf(e.toLowerCase())}},handleSelect:function(t){if(t.value&&(this.defaultValue=this.oldVal+t.value,this.multi)){for(var e=this.defaultValue.split(";"),a=[],s=0;s<e.length;s++)-1==a.indexOf(e[s])&&a.push(e[s]);this.defaultValue=a.join(";")+";"}this.$emit("input",this.defaultValue)},fetchStaff:function(){var e=this;window._staffs&&0<window._staffs.length?this.staffs=window._staffs:this.$http.get(window.base_url+"admin/common/getStaffs/",{}).then(function(t){e.staffs=window._staffs=t.body},function(t){})}}},l=a(44),i=Object(l.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,size:e.size,placeholder:"请输入RTX名称"},on:{select:e.handleSelect},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"name"},[e._v(e._s(t.item.name))])]}}]),model:{value:e.defaultValue,callback:function(t){e.defaultValue=t},expression:"defaultValue"}})},[],!1,null,null,null);i.options.__file="elAutocomplete.vue",e.a=i.exports},69:function(t,e,a){"use strict";a.r(e);var s=(a(139),a(44)),l=Object(s.a)({data:function(){return{imgSrc:"data:image/png;base64,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",tips:"您访问的页面不存在"}},props:["msg"],mounted:function(){this.tips=this.msg||"您访问的页面不存在"},watch:{msg:function(t){this.tips=t||"您访问的页面不存在"}}},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"ui_mask_transparent"}),t._v(" "),a("div",{staticClass:"ui_msg"},[a("div",{staticClass:"ui_icon_area"},[a("i",[a("img",{attrs:{src:t.imgSrc}})])]),t._v(" "),a("div",{staticClass:"ui_text_area"},[a("h2",{staticClass:"ui_msg_title"},[t._v(t._s(t.tips))])])])])],1)},[],!1,null,null,null);l.options.__file="ErrorTip.vue",e.default=l.exports}}]);