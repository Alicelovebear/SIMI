(window.webpackJsonp=window.webpackJsonp||[]).push([[3,0],{126:function(t,e,i){"use strict";i.r(e);var n=i(144),u=i.n(n),s=i(140),a=(i(70),i(69)),o={data:function(){return{role:{name:"",id:""},isInput:!1,newName:"",timer:null}},props:{item:{default:{name:"",id:""}},index:{type:Number,default:0}},mounted:function(){this.role=this.item},methods:{handleBlur:function(t){var e=this;this.timer=setTimeout(function(){e.isInput=!1,clearTimeout(e.timer),e.timer=null},200)},handleChange:function(){var t=this;this.isInput=!this.isInput,this.$nextTick(function(){t.$refs.name.$refs.input.focus(),t.newName=t.item.name})},handleSubmit:function(t){var e={id:this.role.id,name:this.newName};this.$emit("change",e,this.index),this.isInput=!this.isInput}}},l=(i(159),i(44)),r=Object(l.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-row",[e.isInput?i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{span:16}},[i("el-input",{ref:"name",attrs:{placeholder:"请输入内容",size:"small"},on:{blur:e.handleBlur},model:{value:e.newName,callback:function(t){e.newName=t},expression:"newName"}})],1),e._v(" "),i("el-col",{staticClass:"ic-check",attrs:{span:2,offset:6}},[i("i",{staticClass:"el-icon-check",on:{click:function(t){return t.stopPropagation(),e.handleSubmit(t)}}})])],1):i("div",[i("span",{staticClass:"role-name"},[e._v(e._s(e.role.name))]),e._v(" "),i("i",{staticClass:"el-icon-edit editBtn",on:{click:function(t){return t.stopPropagation(),e.handleChange(t)}}})])],1)},[],!1,null,null,null);r.options.__file="RoleName.vue";var c=r.exports,d={data:function(){return{notAccess:!1,selectUrl:window.base_url+"admin/roleList",form:{name:""},rules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"}]},checked:!1,roleList:[],roleListObj:{},checkval:{},allRightList:[],dialogFormVisible:!1,formLabelWidth:"100px",active:{id:"",name:""},cur_role_index_temp:null,cur_role_val_temp:null,token:{}}},mounted:function(){this.getAllRoleRight()},methods:{handleNameChange:function(t,e){if(this.roleList[e].name==name)return!1;this.handleSubmitEditRole(t.id,t.name,e)},getAllRoleRight:function(){var c=this;s.a(window.base_url+"admin/role/getAllRights/",{},function(t){if(4004!=t.body.retcode){if(0==t.body.retcode){c.allRightList=t.body.data,c.checkval=t.body.checkRights,c.roleList=t.body.roles,0<c.roleList.length&&(c.active={id:c.roleList[0].id,name:c.roleList[0].name});var e=!0,i=!1,n=void 0;try{for(var a,s=u()(c.roleList);!(e=(a=s.next()).done);e=!0){var o=a.value,l={id:o.id,name:o.name,isEdit:!1};c.roleListObj[o.id]=l}}catch(t){i=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw n}}var r=c.roleList[0].id;c.getRoleRight(r)}}else c.notAccess=!0})},getRoleRight:function(t){var i=this;s.a(window.base_url+"admin/role/getRoleRights/",{id:t},function(t){for(var e in t.body.data)i.checkval[e]=!0})},handleResetState:function(){for(var t in this.roleListObj){var e=this.roleListObj[t];e.isEdit&&(e.isEdit=!1)}},handleSubmitAddRole:function(){var i=this;this.$refs.form.validate(function(t){if(!t)return!1;i.dialogFormVisible=!1;var e={name:i.form.name};s.b(window.base_url+"admin/role/store/",e,function(t){0===t.body.retcode?(i.$message.success("成功添加角色名称！"),i.getAllRoleRight()):i.$message.error("操作失败！")})})},handleSubmitEditRole:function(t,e,i){var n=this;if(""==e)this.$message.warning("角色名不为空");else{var a={id:t,name:e};s.b(window.base_url+"admin/role/update/",a,function(t){0===t.body.retcode?(n.$message.success("成功修改角色名称！"),n.roleList[i].name=e,n.$forceUpdate()):n.$message.error("操作失败！")})}},handleRight:function(t,e,i){for(var n in null===this.cur_role_index_temp&&null===this.cur_role_val_temp||(this.roleList[this.cur_role_index_temp].name=this.cur_role_val_temp),this.active={id:t,name:e},this.checkval)this.checkval[n]=!1;i&&this.handleResetState(),this.getRoleRight(t)},handleSubmitRight:function(){var e=this,t={};for(var i in t.id=this.active.id,t.name=this.active.name,t.permissions={},this.checkval)this.checkval[i]&&(t.permissions[i]=!0);t.isRights=1,s.b(window.base_url+"admin/role/update/",t,function(t){0===t.body.retcode?e.$message.success("成功编辑权限！"):e.$message.error("操作失败！")})},dialogClosed:function(){this.$refs.form.resetFields()}},components:{ErrorTip:a.default,RoleName:c}},m=(i(160),i(161),Object(l.a)(d,function(){var a=this,t=a.$createElement,s=a._self._c||t;return a.notAccess?s("ErrorTip",{attrs:{msg:"您无权限访问哟~"}}):s("el-row",{staticClass:"roleList",attrs:{gutter:24}},[s("el-col",{attrs:{span:8}},[s("el-card",{staticClass:"box-card listbox rolename-list"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"addTit"},[a._v("角色")]),a._v(" "),s("i",{staticClass:"el-icon-plus addRole",on:{click:function(t){a.dialogFormVisible=!0}}})]),a._v(" "),s("ul",{staticClass:"ul-role-list"},a._l(a.roleList,function(e,t){return s("li",{key:t,class:[a.active.id==e.id&&"active"],on:{click:function(t){a.handleRight(e.id,e.name,!0)}}},[s("RoleName",{ref:"roleName",refInFor:!0,attrs:{item:e,index:t},on:{change:a.handleNameChange}})],1)}),0)])],1),a._v(" "),s("el-col",{attrs:{span:16}},[s("el-card",{staticClass:"box-card btnbox"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"title addTit"},[a._v("权限设置")]),a._v(" "),s("el-button",{staticClass:"submitRight",attrs:{type:"primary"},nativeOn:{click:function(t){a.handleSubmitRight()}}},[a._v("提交")])],1),a._v(" "),a._l(a.allRightList,function(t,n){return s("el-row",{key:n},[[s("el-row",{staticClass:"mb15 right-title",attrs:{gutter:24}},[s("el-col",{attrs:{span:24}},[a._v(a._s(t.name))])],1),a._v(" "),a._l(t.children,function(t,i){return s("el-row",{key:i,staticClass:"mb15",staticStyle:{"border-bottom":"1px #F9FAFC solid"},attrs:{gutter:24}},a._l(t,function(t,e){return s("el-col",{key:e,staticClass:"mb10",attrs:{span:6}},[s("el-checkbox",{model:{value:a.checkval[n+"/"+i+"/"+e],callback:function(t){a.$set(a.checkval,n+"/"+i+"/"+e,t)},expression:"checkval[index+'/'+index1+'/'+index2]"}},[a._v(a._s(t.name))])],1)}),1)})]],2)})],2)],1),a._v(" "),s("el-dialog",{attrs:{title:"编辑角色",visible:a.dialogFormVisible,size:"tiny"},on:{"update:visible":function(t){a.dialogFormVisible=t},close:a.dialogClosed}},[s("el-form",{ref:"form",attrs:{model:a.form,rules:a.rules}},[s("el-form-item",{attrs:{label:"角色名称","label-width":a.formLabelWidth,prop:"name"}},[s("el-input",{model:{value:a.form.name,callback:function(t){a.$set(a.form,"name",t)},expression:"form.name"}})],1)],1),a._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{nativeOn:{click:function(t){a.dialogFormVisible=!1}}},[a._v("取 消")]),a._v(" "),s("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return a.handleSubmitAddRole(t)}}},[a._v("确 定")])],1)],1)],1)},[],!1,null,"2701be26",null));m.options.__file="RoleList.vue",e.default=m.exports},138:function(t,e,i){},139:function(t,e,i){"use strict";var n=i(138);i.n(n).a},140:function(t,e,i){"use strict";i.d(e,"a",function(){return o}),i.d(e,"b",function(){return l});var a=i(0),n=i(19),s=i.n(n);function o(t,e,i){return r("get",t,e={params:e,timeout:12e3},i)}function l(t,e,i){return window._token&&!e[window._token.name]&&(e[window._token.name]=window._token.value),r("post",t,e,i)}function r(t,e,i,n){return a.default.http[t](e,i,{timeout:12e3}).then(function(t){if(t.body.token&&(window._token=t.body.token),"function"==typeof n){if(1004==t.body.retcode)return void alert(t.body.msg||"有错误信息！");n(t)}},function(t){t.body={retcode:-200,data:"",msg:"查询超时或接口异常"},"function"==typeof n&&n(t)})}a.default.use(s.a),a.default.http.options.emulateJSON=!0},144:function(t,e,i){t.exports={default:i(145),__esModule:!0}},145:function(t,e,i){i(46),i(45),t.exports=i(146)},146:function(t,e,i){var n=i(7),a=i(71);t.exports=i(2).getIterator=function(t){var e=a(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}},147:function(t,e,i){},148:function(t,e,i){},149:function(t,e,i){},159:function(t,e,i){"use strict";var n=i(147);i.n(n).a},160:function(t,e,i){"use strict";var n=i(148);i.n(n).a},161:function(t,e,i){"use strict";var n=i(149);i.n(n).a},69:function(t,e,i){"use strict";i.r(e);var n=(i(139),i(44)),a=Object(n.a)({data:function(){return{imgSrc:"data:image/png;base64,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",tips:"您访问的页面不存在"}},props:["msg"],mounted:function(){this.tips=this.msg||"您访问的页面不存在"},watch:{msg:function(t){this.tips=t||"您访问的页面不存在"}}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-row",[i("el-col",{attrs:{span:24}},[i("div",{staticClass:"ui_mask_transparent"}),t._v(" "),i("div",{staticClass:"ui_msg"},[i("div",{staticClass:"ui_icon_area"},[i("i",[i("img",{attrs:{src:t.imgSrc}})])]),t._v(" "),i("div",{staticClass:"ui_text_area"},[i("h2",{staticClass:"ui_msg_title"},[t._v(t._s(t.tips))])])])])],1)},[],!1,null,null,null);a.options.__file="ErrorTip.vue",e.default=a.exports}}]);